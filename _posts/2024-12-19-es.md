### es安装配置
https://www.ruanyifeng.com/blog/2017/08/elasticsearch.html

macbook 安装出现 【无法打开“XXXX”，因为Apple无法检查其是否包含恶意软件。怎么解决?】
https://cloud.tencent.com/developer/article/1918927

### springboot配置elasticsearch客户端
elasticsearch服务 7.6.0 版本 restHighLevelClient客户端版本7.6.0

创建spring web项目引入依赖：
<img width="877" alt="image" src="https://github.com/user-attachments/assets/01b1249d-2eef-46a4-a31d-2d6babe03341" />
父项目引入依赖：
```
<parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.1.4.RELEASE</version>
    </parent>

<dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
            <version>2.3.4.RELEASE</version>
        </dependency>
```
spring-boot项目引入elasticsearch:

引入elasticsearch客户端 restHighLevelClient:
```
<dependency>
            <groupId>org.elasticsearch.client</groupId>
            <artifactId>elasticsearch-rest-high-level-client</artifactId>
            <version>7.6.0</version>
            <exclusions>
                <exclusion>
                    <artifactId>elasticsearch-rest-client</artifactId>
                    <groupId>org.elasticsearch.client</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.elasticsearch.client</groupId>
            <artifactId>elasticsearch-rest-client</artifactId>
            <version>7.6.0</version>
        </dependency>
        <!--ES依赖-->
        <dependency>
            <groupId>org.elasticsearch</groupId>
            <artifactId>elasticsearch</artifactId>
            <version>7.6.0</version>
        </dependency>
```
客户端配置：
```
@Configuration
public class config {

    @PostConstruct
    public void init(){
        System.setProperty("es.set.netty.runtime.available.processors", "false");
    }
    public String hostname="localhost";

    public int port=9200;
    @Bean
    public RestHighLevelClient restHighLevelClient(){
        RestHighLevelClient restHighLevelClient = new RestHighLevelClient(RestClient.builder(
                        new HttpHost(hostname, port)));
        return restHighLevelClient;
    }
}
```

### 创建索引
查看当前所有索引：
http://localhost:9200/_cat/indices?v
<img width="985" alt="image" src="https://github.com/user-attachments/assets/5bdd1a5e-2f10-4bc7-9b6f-65e84cd9d4e2" />

创建索引：      
1、创建mapping:      
```
{
  "properties": {
    "brandName": {
      "type": "keyword"
    },
    "categoryName": {
      "type": "keyword"
    },
    "createTime": {
      "type": "date",
      "format": "yyyy-MM-dd HH:mm:ss"
    },
    "id": {
      "type": "long"
    },
    "price": {
      "type": "double"
    },
    "saleNum": {
      "type": "integer"
    },
    "status": {
      "type": "integer"
    },
    "stock": {
      "type": "integer"
    }
  }
}
```

```
public boolean indexCreate() throws IOException {
        CreateIndexRequest indexRequest = new CreateIndexRequest("goods");

        String mapping = "{\n" +
                "  \"properties\": {\n" +
                "    \"brandName\": {\n" +
                "      \"type\": \"keyword\"\n" +
                "    },\n" +
                "    \"categoryName\": {\n" +
                "      \"type\": \"keyword\"\n" +
                "    },\n" +
                "    \"createTime\": {\n" +
                "      \"type\": \"date\",\n" +
                "      \"format\": \"yyyy-MM-dd HH:mm:ss\"\n" +
                "    },\n" +
                "    \"id\": {\n" +
                "      \"type\": \"long\"\n" +
                "    },\n" +
                "    \"price\": {\n" +
                "      \"type\": \"double\"\n" +
                "    },\n" +
                "    \"saleNum\": {\n" +
                "      \"type\": \"integer\"\n" +
                "    },\n" +
                "    \"status\": {\n" +
                "      \"type\": \"integer\"\n" +
                "    },\n" +
                "    \"stock\": {\n" +
                "      \"type\": \"integer\"\n" +
                "    }\n" +
                "  }\n" +
                "}";
        // 4、 设置索引的别名
        // 5、 发送请求
        // 5.1 同步方式发送请求
        IndicesClient indicesClient = restHighLevelClient.indices();
        indexRequest.mapping("_doc",mapping, XContentType.JSON);

        // 请求服务器
        CreateIndexResponse response = indicesClient.create(indexRequest, RequestOptions.DEFAULT);

        return response.isAcknowledged();

    }
```
<img width="937" alt="image" src="https://github.com/user-attachments/assets/54466797-2dee-4037-bdf9-91e4b824542f" />













